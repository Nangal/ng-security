/*
 ngsecurity v1.0.0
 (c) 2015 Concrete Solutions, Inc.
 License: MIT
*/
//# sourceMappingURL=ngsecurity.min.js.map
'use strict';(function(){function g(c){return{link:function(d,b,a){var e=b.css("display");d.$watch(function(){return c.isAuthenticated()},function(a){a?b.css("display",e):b.css("display","none")})},restrict:"A"}}function h(c){return{link:function(d,b,a){var e=b.css("display");d.$watch(function(){return c.isAuthenticated()},function(a){a?b.css("display","none"):b.css("display",e)})},restrict:"A"}}function k(c){return{link:function(d,b,a){var e=b.css("display"),f=a.ngPermissionType;d.$watch(function(){return a.ngIfPermission},
function(a){a=a.split(",");c.getPermissionValidation(f)(a)?b.css("display",e):b.css("display","none")})},restrict:"A"}}function l(c,d){return{link:function(b,a,e){var f=a.css("display"),q=e.ngPermissionType;b.$watch(function(){return d(e.ngIfPermissionModel)(b)},function(e){c.hasPermission(e)||c.getPermissionValidation(q)(e)?a.css("display",f):a.css("display","none")})},restrict:"A"}}function m(c){return{link:function(d,b,a){var e=a.ngPermissionType;d.$watch(function(){return a.ngEnabledPermission},
function(a){a=a.split(",");c.getPermissionValidation(e)(a)?b.removeAttr("disabled"):b.attr("disabled","true")})},restrict:"A"}}function n(c,d,b){var a={login:function(a,b,d){c.put("ng-security-authorization",a);c.putObject("ng-security-user",b);c.putObject("ng-security-permissions",d)},loginByUrl:function(e,c){return d(function(d,r){b.post(e,c).success(function(e){a.login(e.token,e.user,e.permissions);d(e)}).error(r)})},logout:function(){c.remove("ng-security-authorization");c.remove("ng-security-user")},
hasPermission:function(a){return-1!==c.getObject("ng-security-permissions").indexOf(a)},hasAllPermission:function(a){var b=c.getObject("ng-security-permissions"),d=!0;angular.isDefined(a)?angular.forEach(a,function(a){-1===b.indexOf(a)&&(d=!1)}):d=!1;return d},hasAnyPermission:function(a){var b=c.getObject("ng-security-permissions"),d=!1;angular.isDefined(a)&&angular.forEach(a,function(a){-1!==b.indexOf(a)&&(d=!0)});return d},getPermissionValidation:function(b){var c={ANY:a.hasAnyPermission,ALL:a.hasAllPermission};
b||(b="ANY");return c[b]},isAuthenticated:function(){return!!c.get("ng-security-authorization")},getUser:function(){return c.getObject("ng-security-user")}};return a}function p(c,d,b){return{request:function(a){a.headers.Authorization=b.get("ng-security-authorization");return a},responseError:function(a){var b={401:"unauthenticated",403:"permissionDenied"};b[a.status]&&c.$broadcast(b[a.status],a);return d.reject(a)}}}angular.module("ngSecurity").directive("ngIfAuthenticated",g).directive("ngIfAnonymous",
h).directive("ngIfPermission",k).directive("ngIfPermissionModel",l).directive("ngEnabledPermission",m);g.$inject=["$security"];h.$inject=["$security"];k.$inject=["$security"];l.$inject=["$security","$parse"];m.$inject=["$security"];angular.module("ngSecurity",["ngCookies"]);angular.module("ngSecurity").factory("$security",n).factory("$securityInterceptor",p);n.$inject=["$cookies","$q","$http"];p.$inject=["$rootScope","$q","$cookies"]}).call(window);
